(this.webpackJsonpnewsapp=this.webpackJsonpnewsapp||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){},,,,,function(e,t,a){e.exports={container:"Select_container__3fMTk"}},,,function(e,t,a){},,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAABpElEQVRoge3XsWvUYBzG8Y9yKIJVEXQoDjd2EVzsJDgIgpubbnVydtM/wdWxq5MgiCCO4mBBKAguLuLiIqIUWpCj2FodLm/PxrSXq7nkZ32/8EzJvXm+5PJ7EzK16ONlkX7HXfbNNazgZ5FVXO+00YQcwl38MJJI2cJ9HO6sXU1O4Ik/Bcp5jtMddRzLBXwwXiLlIy6W1tjt3NZYwGCPIrtlUPw2cQffK86bOkfxYB8C5TzEsWLNS/jUpsg5vG5AIuWN0Yg+gxdtiFzG5wYlUr7ianGNnuGE25qGQBqtm1OQSNnEveJacKNpiRk8nqJAOc9wqmmJObxrUSLlPc43JXET3zqQSBng1t8IpIetK4FyFnFkUomzdo6/KFnCbF2Jqg0pUr7gyjiJ26pfEaJlw3AbSCN6m+N4FKDgpHmKk7+LLBcH1gKUq5vUdZnRB84G3mK+fKsCM2/4frZOxX/M0PJfYEf38J+cdcki0cgi0cgi0eg1vF7VvrQXje1ZB+aOZJFoZJFoZJFoZJFoZJFoZJFoZJFoHGiRpdZbTM6rrgtk/ht+AZJi8ybhOtGyAAAAAElFTkSuQmCC"},,,function(e,t,a){e.exports=a(57)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(11),i=a.n(c),s=(a(34),a(5)),o=a(4),u=Object(r.createContext)({isLoggedIn:!1,isAdmin:!1,userId:null,token:null,login:function(){},logout:function(){}}),m=a(2),p=a(1),d=a.n(p),E=a(3),v=(a(36),a(37),function(e){return l.a.createElement("div",{className:"card ".concat(e.className),style:e.style},e.children)}),f=(a(38),function(e){return e.href?l.a.createElement("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href},e.children):e.to?l.a.createElement(o.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger")},e.children):l.a.createElement("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled},e.children)}),b=a(58),h=(a(44),function(e){return i.a.createPortal(l.a.createElement("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),g=(a(45),function(e){var t=l.a.createElement("div",{className:"modal ".concat(e.className),style:e.style},l.a.createElement("header",{className:"modal-header ".concat(e.headerClass)},l.a.createElement("h2",null,e.header)),l.a.createElement("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",{className:"modal-content ".concat(e.contentClass)},e.children),l.a.createElement("footer",{className:"modal-footer ".concat(e.footerClass)},e.footer)));return c.createPortal(t,document.getElementById("modal-hook"))}),O=function(e){return l.a.createElement(l.a.Fragment,null,e.show&&l.a.createElement(h,{onClick:e.onCancel}),l.a.createElement(b.a,{in:e.show,timeout:200,mountOnEnter:!0,unmountOnExit:!0,classNames:"modal"},l.a.createElement(g,e)))},j=(a(22),function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(),c=Object(m.a)(l,2),i=c[0],s=c[1],o=Object(r.useRef)([]),u=Object(r.useCallback)(function(){var e=Object(E.a)(d.a.mark((function e(t){var a,r,l,c,i,u,m=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>1&&void 0!==m[1]?m[1]:"GET",r=m.length>2&&void 0!==m[2]?m[2]:null,l=m.length>3&&void 0!==m[3]?m[3]:{},n(!0),c=new AbortController,o.current.push(c),e.prev=6,e.next=9,fetch(t,{method:a,body:r,headers:l,signal:c.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(u=e.sent,o.current=o.current.filter((function(e){return e!==c})),i.ok){e.next=16;break}throw new Error(u.message);case 16:return n(!1),e.abrupt("return",u);case 20:throw e.prev=20,e.t0=e.catch(6),s(e.t0.message),n(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){o.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:i,sendRequest:u,clearError:function(){s(null)}}}),I=function(e){return l.a.createElement(O,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:l.a.createElement(f,{onClick:e.onClear},"Okay")},l.a.createElement("p",null,e.error))},k=(a(46),function(e){return l.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},l.a.createElement("div",{className:"lds-dual-ring"}))}),x=(a(47),function(e){return l.a.createElement("div",{className:"avatar ".concat(e.className),style:e.style},l.a.createElement("img",{src:e.image,alt:e.alt,style:{width:e.width,height:e.width}}))}),y=function(e){var t=j(),a=t.isLoading,n=t.error,c=t.sendRequest,i=t.clearError,p=Object(r.useContext)(u),b=Object(r.useState)(!1),h=Object(m.a)(b,2),g=h[0],y=h[1],C=Object(s.g)(),N=function(){return y(!1)},w=function(){var t=Object(E.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N(),t.prev=1,t.next=4,c("".concat("https://newsappprod.herokuapp.com/api","/posts/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+p.token});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.prev=8,C.push("/"),C.go(0),t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[1,6,8,12]])})));return function(){return t.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:n,onClear:i}),l.a.createElement(O,{show:g,onCancel:N,header:"Delete your place?",contentClass:"place-item-modal-content",footerClass:"place-item-modal-actions",footer:l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{inverse:!0,onClick:N},"Cancel"),l.a.createElement(f,{danger:!0,onClick:w},"DELETE"))},l.a.createElement("p",null,"Post can't be restored")),l.a.createElement("li",{className:"place-item"},l.a.createElement(v,{className:"place-item-content"},a&&l.a.createElement(k,{asOverlay:!0}),l.a.createElement("div",{className:"place-item-info"},l.a.createElement("div",{className:"author-data"},l.a.createElement(o.b,{to:"/users/".concat(e.creatorId)},l.a.createElement("div",{className:"user-item-image"},l.a.createElement(x,{image:e.creatorImage,alt:""})),l.a.createElement("div",{className:"user-item-info"},l.a.createElement("h3",null,e.creatorName),l.a.createElement("h3",null,e.category)))),l.a.createElement("h2",null,e.title),l.a.createElement("h3",null,e.address),l.a.createElement("p",null,e.description)),l.a.createElement("div",{className:"place-item-image"},l.a.createElement("img",{src:e.image,alt:e.title})),l.a.createElement("div",{className:"place-item-actions"},(p.userId===e.creatorId||p.isAdmin)&&l.a.createElement(f,{danger:!0,onClick:function(){return y(!0)}},"DELETE"),p.userId===e.creatorId&&l.a.createElement(f,{to:"/posts/".concat(e.id)},"EDIT")))))},C=function(e){return 0===e.items.length?l.a.createElement("div",{className:"place-list center"},l.a.createElement(v,null,l.a.createElement("h2",null,"No places found."),l.a.createElement(f,{to:"/places/new"},"Create one?"))):l.a.createElement("ul",{className:"place-list"},e.items.map((function(e){return l.a.createElement(y,{key:e.id,id:e.id,image:e.image,title:e.title,description:e.description,address:e.address,category:e.category,creatorId:e.creator.id,creatorName:e.creator.name,creatorImage:e.creator.image,coordinate:e.location})})))},N=function(e){var t=j(),a=t.isLoading,n=t.error,c=t.sendRequest,i=t.clearError,o=Object(r.useContext)(u),p=Object(r.useState)(!1),b=Object(m.a)(p,2),h=b[0],g=b[1],x=Object(s.g)(),y=function(){return g(!1)},C=function(){var t=Object(E.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(),t.prev=1,t.next=4,c("".concat("https://newsappprod.herokuapp.com/api","/admin/post/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+o.token});case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.prev=8,x.push("/"),x.go(0),t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[1,6,8,12]])})));return function(){return t.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:n,onClear:i}),l.a.createElement(O,{show:h,onCancel:y,header:"Delete your post?",contentClass:"place-item-modal-content",footerClass:"place-item-modal-actions",footer:l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{inverse:!0,onClick:y},"Cancel"),l.a.createElement(f,{danger:!0,onClick:C},"DELETE"))},l.a.createElement("p",null,"Post can't be restored")),l.a.createElement(v,{className:"place-item-content"},a&&l.a.createElement(k,{asOverlay:!0}),l.a.createElement("div",{className:"place-item-info"},l.a.createElement("h2",null,e.title),l.a.createElement("p",null,e.description)),l.a.createElement("div",{className:"place-item-image"},l.a.createElement("img",{src:e.image,alt:e.title})),l.a.createElement("div",{className:"place-item-actions"},o.isAdmin&&l.a.createElement(f,{to:"/posts/".concat(e.id)},"EDIT"),o.isAdmin&&l.a.createElement(f,{danger:!0,onClick:function(){return g(!0)}},"DELETE"))))},w=a(19),T=a.n(w);var A=function(e){return l.a.createElement("div",{className:T.a.container},l.a.createElement("select",{name:"type",id:"type",onChange:function(t){return e.onChange(t.target.value)}},"place",e.items.map((function(e){return l.a.createElement("option",{className:T.a.option,key:e.id,value:e.value},e.label)}))))},S=function(e){var t=Object(r.useState)("none"),a=Object(m.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(""),s=Object(m.a)(i,2),o=s[0],u=s[1],p=j(),v=p.isLoading,f=(p.error,p.sendRequest),b=(p.clearError,Object(r.useState)([])),h=Object(m.a)(b,2),g=h[0],O=h[1],I=Object(r.useState)(),x=Object(m.a)(I,2),y=x[0],w=x[1];return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat("https://newsappprod.herokuapp.com/api","/admin/post"));case 3:t=e.sent,w(t.posts[0]),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[f]),Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("".concat("https://newsappprod.herokuapp.com/api","/posts"));case 3:t=e.sent,O(t.posts),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[f]),l.a.createElement(l.a.Fragment,null,v&&l.a.createElement("div",{className:"center"},l.a.createElement(k,null)),!v&&y&&l.a.createElement(N,{id:null===y||void 0===y?void 0:y.id,title:null===y||void 0===y?void 0:y.title,description:null===y||void 0===y?void 0:y.description,image:null===y||void 0===y?void 0:y.image}),l.a.createElement("div",{className:"filters"},l.a.createElement(A,{items:[{id:1,label:"Select Category",value:"none"},{id:2,label:"Sport",value:"sport"},{id:3,label:"Politics",value:"politics"},{id:4,label:"Economics",value:"economics"},{id:5,label:"Culture",value:"culture"}],onChange:function(e){c(e)}}),l.a.createElement("input",{id:"title",type:"text",onInput:function(e){console.log("change ",e.target.value),u(e.target.value)}})),!v&&!g&&l.a.createElement("h2",null,"No users posts available"),!v&&g&&l.a.createElement(C,{items:g.filter((function(e){return"none"!==n&&o?e.category===n&&e.title.includes(o):"none"===n||o?"none"===n&&o?e.title.includes(o):e:e.category===n}))}))},V=(a(48),function(e){return l.a.createElement("li",{className:"user-item"},l.a.createElement(v,{className:"user-item-content"},l.a.createElement(o.b,{to:"/".concat(e.id,"/posts")},l.a.createElement("div",{className:"user-item-image"},l.a.createElement(x,{image:e.image,alt:e.name})),l.a.createElement("div",{className:"user-item-info"},l.a.createElement("div",null,l.a.createElement("h2",null,e.name),l.a.createElement("h3",null,e.email)),l.a.createElement("div",null,l.a.createElement("h3",null,e.postCount,1===e.postCount?" Post":" Posts"))))))}),L=(a(49),function(){var e=Object(r.useContext)(u),t=j(),a=t.isLoading,n=t.error,c=t.sendRequest,i=t.clearError,o=Object(r.useState)(),p=Object(m.a)(o,2),v=p[0],b=p[1],h=Object(r.useState)(!1),g=Object(m.a)(h,2),x=g[0],y=g[1],C=Object(s.g)(),N=Object(s.h)().userId;Object(r.useEffect)((function(){var t=e.userId;N!==e.userId&&(t=N),function(){var a=Object(E.a)(d.a.mark((function a(){var n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c("".concat("https://newsappprod.herokuapp.com/api","/users/").concat(t),"GET",null,{Authorization:"Bearer "+e.token});case 3:n=a.sent,b(n.user),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}()()}),[c]);var w=function(){return y(!1)},T=function(){var t=Object(E.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(),t.prev=1,t.next=4,c("".concat("https://newsappprod.herokuapp.com/api","/users/").concat(e.userId),"DELETE",null,{Authorization:"Bearer "+e.token});case 4:e.logout(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:n,onClear:i}),l.a.createElement(O,{show:x,onCancel:w,header:"Delete your profile?",contentClass:"place-item-modal-content",footerClass:"place-item-modal-actions",footer:l.a.createElement(l.a.Fragment,null,l.a.createElement(f,{inverse:!0,onClick:w},"Cancel"),l.a.createElement(f,{danger:!0,onClick:T},"DELETE"))},l.a.createElement("p",null,"Profile can't be restored")),a&&l.a.createElement("div",{className:"center"},l.a.createElement(k,null)),!a&&v&&l.a.createElement("div",{className:"user-profile"},l.a.createElement(V,{key:v.id,id:v.id,image:v.image,name:v.name,email:v.email,postCount:v.posts.length}),l.a.createElement("div",{className:"user-profile-controls"},e.isLoggedIn&&e.userId===N&&l.a.createElement(f,{danger:!0,onClick:function(){return y(!0)}},"DELETE PROFILE"),e.isLoggedIn&&l.a.createElement(f,{inverse:!0,onClick:function(){var t=e.userId;N!==e.userId&&(t=N),C.push("/".concat(t,"/posts"))}},"SHOW POSTS"),e.isLoggedIn&&l.a.createElement(f,{to:"/update/".concat(v.id)},"EDIT PROFILE"))))}),P=function(e){var t=j(),a=t.isLoading,n=t.error,c=t.sendRequest,i=t.clearError,o=Object(r.useState)(),u=Object(m.a)(o,2),p=u[0],v=u[1],f=Object(s.h)().userId,b=Object(s.g)();Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("".concat("https://newsappprod.herokuapp.com/api","/posts/user/").concat(f));case 3:t=e.sent,v(t.posts),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b.push("/");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[c,f]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:n,onClear:i}),a&&l.a.createElement("div",{className:"center"},l.a.createElement(k,null)),!a&&p&&l.a.createElement(C,{items:p,onDelete:function(e){v((function(t){return t.filter((function(t){return t.id!==e}))}))}}))},D=a(8),R=a(25),F=function(e){return{type:"MINLENGTH",val:e}},J=function(e,t){var a,n=!0,r=Object(R.a)(t);try{for(r.s();!(a=r.n()).done;){var l=a.value;"REQUIRE"===l.type&&(n=n&&e.trim().length>0),"MINLENGTH"===l.type&&(n=n&&e.trim().length>=l.val),"MAXLENGTH"===l.type&&(n=n&&e.trim().length<=l.val),"MIN"===l.type&&(n=n&&+e>=l.val),"MAX"===l.type&&(n=n&&+e<=l.val),"EMAIL"===l.type&&(n=n&&/^\S+@\S+\.\S+$/.test(e))}}catch(c){r.e(c)}finally{r.f()}return n},U=(a(50),function(e,t){switch(t.type){case"CHANGE":return Object(D.a)(Object(D.a)({},e),{},{value:t.val,isValid:J(t.val,t.validators)});case"TOUCH":return Object(D.a)(Object(D.a)({},e),{},{isTouched:!0});default:return e}}),B=function(e){var t=Object(r.useReducer)(U,{value:e.initialValue||"",isValid:e.initialIsValid||"",isTouched:!1}),a=Object(m.a)(t,2),n=a[0],c=a[1],i=e.id,s=e.onInput,o=n.value,u=n.isValid;Object(r.useEffect)((function(){e.onInput(i,o,u)}),[i,o,u,s]);var p=function(t){c({type:"CHANGE",val:t.target.value,validators:e.validators})},d=function(){c({type:"TOUCH"})},E="input"===e.element?l.a.createElement("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:p,onBlur:d,value:n.value}):l.a.createElement("textarea",{id:e.id,rows:e.rows||3,onBlur:d,onChange:p,value:n.value});return l.a.createElement("div",{className:"form-control ".concat(!n.isValid&&n.isTouched&&"form-control-invalid")},l.a.createElement("label",{htmlFor:e.id},e.label),E,!n.isValid&&n.isTouched&&l.a.createElement("p",null,e.errorText))},G=a(15),z=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var n in e.inputs)e.inputs[n]&&(a=n===t.inputId?a&&t.isValid:a&&e.inputs[n].isValid);return Object(D.a)(Object(D.a)({},e),{},{inputs:Object(D.a)(Object(D.a)({},e.inputs),{},Object(G.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:a});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},q=function(e,t){var a=Object(r.useReducer)(z,{inputs:e,isValid:t}),n=Object(m.a)(a,2),l=n[0],c=n[1];return[l,Object(r.useCallback)((function(e,t,a){c({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),Object(r.useCallback)((function(e,t){c({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]},H=(a(14),function(){var e=Object(r.useState)("none"),t=Object(m.a)(e,2),a=t[0],n=t[1],c=j(),i=c.isLoading,o=c.error,p=c.sendRequest,v=c.clearError,b=Object(r.useContext)(u),h=q({title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1}},!1),g=Object(m.a)(h,2),O=g[0],x=g[1],y=Object(s.g)(),C=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p("".concat("https://newsappprod.herokuapp.com/api","/posts"),"POST",JSON.stringify({title:O.inputs.title.value,description:O.inputs.description.value,address:O.inputs.address.value,category:a}),{"Content-Type":"application/json",Authorization:"Bearer "+b.token});case 4:y.push("/"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:o,onClear:v}),l.a.createElement("form",{className:"place-form",onSubmit:C},i&&l.a.createElement(k,{asOverlay:!0}),l.a.createElement(B,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],onInput:x,errorText:"Please enter a valid title"}),l.a.createElement(B,{id:"description",element:"textarea",label:"Description",validators:[F(5)],onInput:x,errorText:"Please enter a valid description."}),l.a.createElement(A,{items:[{id:1,label:"Select Category",value:"none"},{id:2,label:"Sport",value:"sport"},{id:3,label:"Politics",value:"politics"},{id:4,label:"Economics",value:"economics"},{id:5,label:"Culture",value:"culture"}],onChange:function(e){n(e)}}),l.a.createElement(B,{id:"address",element:"input",label:"Address",validators:[{type:"REQUIRE"}],onInput:x,errorText:"Please enter a valid address"}),l.a.createElement(f,{type:"submit",disabled:!O.isValid},"ADD PLACE")))}),M=function(){var e=j(),t=e.isLoading,a=e.error,n=e.sendRequest,c=e.clearError,i=Object(r.useState)(),o=Object(m.a)(i,2),p=o[0],b=o[1],h=Object(s.h)().postId,g=Object(r.useContext)(u),O=Object(s.g)(),x=q({title:{value:"",isValid:!0},description:{value:"",isValid:!0}},!0),y=Object(m.a)(x,3),C=y[0],N=y[1],w=y[2],T=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://newsappprod.herokuapp.com/api","/posts/").concat(h),"PATCH",JSON.stringify({title:C.inputs.title.value,description:C.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+g.token});case 4:O.push("/"+g.userId+"/posts"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://newsappprod.herokuapp.com/api","/posts/").concat(h));case 3:t=e.sent,b(t.post),w({title:{value:t.post.title,isValid:!0},description:{value:t.post.description,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[w,h,n]),t?l.a.createElement("div",{className:"center"},l.a.createElement(k,null)):p||a?l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:a,onClear:c}),!t&&p&&l.a.createElement("form",{className:"place-form",onSubmit:T},l.a.createElement(B,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],onInput:N,initialValue:p.title,initialIsValid:!0,errorText:"Please enter a valid title"}),l.a.createElement(B,{id:"description",element:"textarea",label:"Description",validators:[F(5)],onInput:N,initialValue:p.description,initialIsValid:!0,errorText:"Please enter a valid description."}),l.a.createElement(f,{type:"submit",disabled:!C.isValid},"UPDATE PLACE"))):l.a.createElement("div",{className:"center"},l.a.createElement(v,null,l.a.createElement("h2",null,"Couldn't fetch post")))},Q=function(){var e=j(),t=e.isLoading,a=e.error,n=e.sendRequest,c=e.clearError,i=Object(r.useState)(),o=Object(m.a)(i,2),p=o[0],b=o[1],h=Object(s.h)().userId,g=Object(r.useContext)(u),O=Object(s.g)(),x=q({email:{value:"",isValid:!0},name:{value:"",isValid:!0}},!0),y=Object(m.a)(x,3),C=y[0],N=y[1],w=y[2],T=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://newsappprod.herokuapp.com/api","/users/").concat(h),"PATCH",JSON.stringify({email:C.inputs.email.value,name:C.inputs.name.value}),{"Content-Type":"application/json",Authorization:"Bearer "+g.token});case 4:O.push("/users/"+g.userId),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://newsappprod.herokuapp.com/api","/users/").concat(g.userId),"GET",null,{Authorization:"Bearer "+g.token});case 3:t=e.sent,b(t.user),w({email:{value:t.user.email,isValid:!0},name:{value:t.user.name,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[w,h,n]),t?l.a.createElement("div",{className:"center"},l.a.createElement(k,null)):p||a?l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:a,onClear:c}),!t&&p&&l.a.createElement("form",{className:"place-form",onSubmit:T},l.a.createElement(B,{id:"email",element:"input",type:"text",label:"Email",validators:[{type:"REQUIRE"}],onInput:N,initialValue:p.email,initialIsValid:!0,errorText:"Please enter a valid email"}),l.a.createElement(B,{id:"name",element:"textarea",label:"Name",validators:[F(5)],onInput:N,initialValue:p.name,initialIsValid:!0,errorText:"Please enter a valid name."}),l.a.createElement(f,{type:"submit",disabled:!C.isValid},"UPDATE USER"))):l.a.createElement("div",{className:"center"},l.a.createElement(v,null,l.a.createElement("h2",null,"Couldn't fetch user")))},X=function(){var e=j(),t=e.isLoading,a=e.error,n=e.sendRequest,c=e.clearError,i=Object(r.useContext)(u),o=q({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),p=Object(m.a)(o,2),v=p[0],b=p[1],h=Object(s.g)(),g=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://newsappprod.herokuapp.com/api","/admin/post"),"POST",JSON.stringify({title:v.inputs.title.value,description:v.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+i.token});case 4:h.push("/"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:a,onClear:c}),l.a.createElement("form",{className:"place-form",onSubmit:g},t&&l.a.createElement(k,{asOverlay:!0}),l.a.createElement(B,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],onInput:b,errorText:"Please enter a valid title"}),l.a.createElement(B,{id:"description",element:"textarea",label:"Description",validators:[F(5)],onInput:b,errorText:"Please enter a valid description."}),l.a.createElement(f,{type:"submit",disabled:!v.isValid},"ADD POST")))},Z=function(){var e=j(),t=e.isLoading,a=e.error,n=e.sendRequest,c=e.clearError,i=Object(r.useState)(),o=Object(m.a)(i,2),p=o[0],b=o[1],h=Object(s.h)().postId,g=Object(r.useContext)(u),O=Object(s.g)(),x=q({title:{value:"",isValid:!0},description:{value:"",isValid:!0}},!0),y=Object(m.a)(x,3),C=y[0],N=y[1],w=y[2],T=function(){var e=Object(E.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n("".concat("https://newsappprod.herokuapp.com/api","/admin/post/").concat(h),"PATCH",JSON.stringify({title:C.inputs.title.value,description:C.inputs.description.value}),{"Content-Type":"application/json",Authorization:"Bearer "+g.token});case 4:O.push("/"),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(E.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat("https://newsappprod.herokuapp.com/api","/admin/post"));case 3:t=e.sent,b(t.posts[0]),w({title:{value:t.posts[0].title,isValid:!0},description:{value:t.posts[0].description,isValid:!0}},!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[w,h,n]),t?l.a.createElement("div",{className:"center"},l.a.createElement(k,null)):p||a?l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:a,onClear:c}),!t&&p&&l.a.createElement("form",{className:"place-form",onSubmit:T},l.a.createElement(B,{id:"title",element:"input",type:"text",label:"Title",validators:[{type:"REQUIRE"}],onInput:N,initialValue:p.title,initialIsValid:!0,errorText:"Please enter a valid title"}),l.a.createElement(B,{id:"description",element:"textarea",label:"Description",validators:[F(5)],onInput:N,initialValue:p.description,initialIsValid:!0,errorText:"Please enter a valid description."}),l.a.createElement(f,{type:"submit",disabled:!C.isValid},"UPDATE POST"))):l.a.createElement("div",{className:"center"},l.a.createElement(v,null,l.a.createElement("h2",null,"Couldn't fetch post")))},K=(a(51),function(e){var t=Object(r.useContext)(u),a=Object(r.useState)(!0),n=Object(m.a)(a,2),c=n[0],i=n[1],s=j(),o=s.isLoading,p=s.error,b=s.sendRequest,h=s.clearError,g=q({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),O=Object(m.a)(g,3),x=O[0],y=O[1],C=O[2],N=function(){var e=Object(E.a)(d.a.mark((function e(a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!c){e.next=13;break}return e.prev=2,e.next=5,b("".concat("https://newsappprod.herokuapp.com/api","/users/login"),"POST",JSON.stringify({email:x.inputs.email.value,password:x.inputs.password.value}),{"Content-Type":"application/json"});case 5:n=e.sent,t.login(n.userId,n.token,n.isAdmin),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:e.next=22;break;case 13:return e.prev=13,e.next=16,b("".concat("https://newsappprod.herokuapp.com/api","/users/signup"),"POST",JSON.stringify({name:x.inputs.name.value,email:x.inputs.email.value,password:x.inputs.password.value}),{"Content-Type":"application/json"});case 16:r=e.sent,t.login(r.userId,r.token,r.isAdmin),e.next=22;break;case 20:e.prev=20,e.t1=e.catch(13);case 22:case"end":return e.stop()}}),e,null,[[2,9],[13,20]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:p,onClear:h}),l.a.createElement(v,{className:"authentication"},o&&l.a.createElement(k,{asOverlay:!0}),l.a.createElement("h2",null," ",c?"LOGIN":"SIGN-UP"),l.a.createElement("hr",null),l.a.createElement("form",{onSubmit:N},!c&&l.a.createElement(B,{id:"name",element:"input",type:"text",label:"Full Name",validators:[{type:"REQUIRE"}],onInput:y,errorText:"Please enter full name."}),l.a.createElement(B,{id:"email",element:"input",type:"email",label:"Email",validators:[{type:"EMAIL"}],onInput:y,errorText:"Please enter a valid email."}),l.a.createElement(B,{id:"password",element:"input",type:"password",label:"Password",validators:[F(6)],onInput:y,errorText:"Please enter a valid password, at least 6 characters."}),l.a.createElement(f,{type:"submit",disabled:!x.isValid},c?"LOGIN":"SIGN-UP")),l.a.createElement(f,{inverse:!0,onClick:function(e){c?C(Object(D.a)(Object(D.a)({},x.inputs),{},{name:{value:"",isValid:!1}}),!1):C(Object(D.a)(Object(D.a)({},x.inputs),{},{name:void 0}),x.inputs.email.isValid&&x.inputs.password.isValid),i((function(e){return!e}))}},c?"SWITCH TO SIGN-UP":"SWITCH TO LOGIN")))}),Y=(a(52),function(e){return l.a.createElement("header",{className:"main-header"},e.children)}),W=(a(53),function(e){var t=Object(r.useContext)(u);return l.a.createElement("ul",{className:"nav-links"},l.a.createElement("li",null,l.a.createElement(o.c,{to:"/",exact:!0},"ALL POSTS")),t.isLoggedIn&&t.isAdmin&&l.a.createElement("li",null,l.a.createElement(o.c,{to:"/users"},"All USERS")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(o.c,{to:"/users/".concat(t.userId)},"MY PROFILE")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(o.c,{to:"/".concat(t.userId,"/posts")},"MY POSTS")),t.isLoggedIn&&!t.isAdmin&&l.a.createElement("li",null,l.a.createElement(o.c,{to:"/posts/new"},"ADD POST")),t.isLoggedIn&&t.isAdmin&&l.a.createElement("li",null,l.a.createElement(o.c,{to:"/posts/new"},"ADMIN POST")),t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement("button",{onClick:t.logout},"LOGOUT")),!t.isLoggedIn&&l.a.createElement("li",null,l.a.createElement(o.c,{to:"/auth"},"LOGIN")))}),_=(a(54),function(e){var t=l.a.createElement(b.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0},l.a.createElement("aside",{className:"side-drawer",onClick:e.onClick},e.children));return c.createPortal(t,document.getElementById("drawer-hook"))}),$=a(26),ee=a.n($),te=(a(55),function(e){var t=Object(r.useState)(!1),a=Object(m.a)(t,2),n=a[0],c=a[1],i=function(){c(!1)};return l.a.createElement(l.a.Fragment,null,n&&l.a.createElement(h,{onClick:i}),l.a.createElement(_,{show:n,onClick:i},l.a.createElement("nav",{className:"main-navigation-drawer-nav"},l.a.createElement(W,null))),l.a.createElement(Y,null,l.a.createElement("button",{className:"main-navigation-menu-btn",onClick:function(){c(!0)}},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)),l.a.createElement("h1",{className:"main-navigation-title"},l.a.createElement(o.b,{to:"/"},l.a.createElement("img",{src:ee.a,alt:"home"}))),l.a.createElement("nav",{className:"main-navigation-header-nav"},l.a.createElement(W,null))))}),ae=(a(56),function(e){return 0===e.items.length?l.a.createElement("div",{className:"center"},l.a.createElement(v,null,l.a.createElement("h2",null,"No users found."))):l.a.createElement("ul",{className:"users-list"},e.items.map((function(e){return l.a.createElement(V,{key:e.id,id:e.id,image:e.image,name:e.name,email:e.email,postCount:e.posts.length})})))}),ne=function(){var e=Object(r.useContext)(u),t=Object(r.useState)([]),a=Object(m.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(""),s=Object(m.a)(i,2),o=s[0],p=(s[1],j()),v=p.isLoading,f=p.error,b=p.sendRequest,h=p.clearError;Object(r.useEffect)((function(){(function(){var t=Object(E.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b("".concat("https://newsappprod.herokuapp.com/api","/users"),"GET",null,{Authorization:"Bearer "+e.token});case 3:a=t.sent,c(a.users.filter((function(t){return t.id!==e.userId}))),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[b]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(I,{error:f,onClear:h}),v&&l.a.createElement("div",{className:"center"},l.a.createElement(k,null)),!v&&n&&l.a.createElement(ae,{items:n.filter((function(e){return o?e.name.includes(o):e}))}))},re=function(){var e,t=function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(r.useState)(null),i=Object(m.a)(c,2),s=i[0],o=i[1],u=Object(r.useState)(null),p=Object(m.a)(u,2),d=p[0],E=p[1],v=Object(r.useState)(!1),f=Object(m.a)(v,2),b=f[0],h=f[1],g=Object(r.useCallback)((function(){l(null),o(null),E(null),h(!1),localStorage.removeItem("userData")}),[]),O=Object(r.useCallback)((function(e,t,a,n){l(t),E(e),h(a);var r=n||new Date((new Date).getTime()+36e5);o(r),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,isAdmin:a,expiration:r.toISOString()}))}),[]);return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&O(e.userId,e.token,e.isAdmin,new Date(e.expiration))}),[O]),Object(r.useEffect)((function(){if(a&&s){var e=s.getTime()-(new Date).getTime();n=setTimeout(g,e)}else clearTimeout(n)}),[a,g,s]),{token:a,login:O,logout:g,userId:d,isAdmin:b}}(),a=t.token,c=t.login,i=t.logout,p=t.userId,d=t.isAdmin;return e=a&&!d?l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",exact:!0},l.a.createElement(S,null)),l.a.createElement(s.b,{path:"/users/:userId"},l.a.createElement(L,null)),l.a.createElement(s.b,{path:"/:userId/posts"},l.a.createElement(P,null)),l.a.createElement(s.b,{path:"/posts/new",exact:!0},l.a.createElement(H,null)),l.a.createElement(s.b,{path:"/posts/:postId",exact:!0},l.a.createElement(M,null)),l.a.createElement(s.b,{path:"/update/:userId"},l.a.createElement(Q,null)),l.a.createElement(s.a,{to:"/"})):a&&d?l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",exact:!0},l.a.createElement(S,null)),l.a.createElement(s.b,{path:"/users",exact:!0},l.a.createElement(ne,null)),l.a.createElement(s.b,{path:"/users/:userId"},l.a.createElement(L,null)),l.a.createElement(s.b,{path:"/:userId/posts"},l.a.createElement(P,null)),l.a.createElement(s.b,{path:"/posts/new",exact:!0},l.a.createElement(X,null)),l.a.createElement(s.b,{path:"/posts/:postId",exact:!0},l.a.createElement(Z,null)),l.a.createElement(s.a,{to:"/"})):l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",exact:!0},l.a.createElement(S,null)),l.a.createElement(s.b,{path:"/:userId/posts"},l.a.createElement(P,null)),l.a.createElement(s.b,{path:"/auth",exact:!0},l.a.createElement(K,null)),l.a.createElement(s.a,{to:"/auth"})),l.a.createElement(u.Provider,{value:{isLoggedIn:!!a,token:a,userId:p,isAdmin:d,login:c,logout:i}},l.a.createElement(o.a,null,l.a.createElement(te,null),l.a.createElement("main",null,e)))};i.a.render(l.a.createElement(re,null),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.8b6e3f18.chunk.js.map